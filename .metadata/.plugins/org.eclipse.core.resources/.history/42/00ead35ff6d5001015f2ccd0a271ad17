package ejercicios;
import java.util.*;
public class listamutant {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        List<String> llistaS = new ArrayList<>(Arrays.asList(sc.nextLine().split(",")));
        List<Integer> llista = new ArrayList<>();
        for(int i = 0; i < llistaS.size(); i++) {
        	llista.add(Integer.parseInt(llistaS.get(i)));
        }
        String input = sc.nextLine();
        while(!input.equals("-1")){
        	String[] parts = input.split("#");
			String operacio = parts[0];
			int numero = Integer.parseInt(parts[1]);
			String costat = parts[2];
			if (operacio.equals("+")) {
				if (costat.equals("e")) {
					llista.add(0, numero);
				} else if (costat.equals("d")) {
					llista.add(numero);
				}
			} else if (operacio.equals("-")) {
				if (costat.equals("e")) {
					llista.remove(Integer.valueOf(numero));
				} else if (costat.equals("d")) {
					for (int i = llista.size() - 1; i >= 0; i--) {
						if (llista.get(i) == numero) {
							llista.remove(i);
							break;
						}}}
			}
			System.out.println(llista);			
        }
    }
}